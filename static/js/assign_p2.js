    console.log("===== assign_p2.js is working =====")


// ##### à¸ˆà¸±à¸š activityid à¹ƒà¸ªà¹ˆ list
    document.getElementById("but-next2").addEventListener("click", () => {
    console.log("===== assign_p2.js - getElementById(\"but-next2\") is working =====")
        const checkboxes = document.querySelectorAll('input[name="lesson"]');
        const selectedIds = [];

        checkboxes.forEach(checkbox => {
            if (checkbox.checked) {
            selectedIds.push(checkbox.id); // à¹€à¸Šà¹ˆà¸™ "s1", "s2"
            }
        });

        // à¹à¸›à¸¥à¸‡ "s1" â†’ 1, "s2" â†’ 2
        const mappedIds = selectedIds.map(id => {
            const match = id.match(/\d+/);
            return match ? parseInt(match[0], 10) : null;
        }).filter(n => n !== null);

        console.log("Mapped IDs:", mappedIds);

        // à¸ˆà¸±à¸”à¸à¸²à¸£à¹à¸ªà¸”à¸‡à¸œà¸¥à¹€à¸‰à¸žà¸²à¸° dropdown à¸—à¸µà¹ˆà¸•à¸£à¸‡à¸à¸±à¸š mappedIds
        const allTemplates = document.querySelectorAll('.each-tem');
        allTemplates.forEach((tem, index) => {
            if (mappedIds.includes(index + 1)) {
            tem.style.display = "flex"; // à¸«à¸£à¸·à¸­ "block" à¸•à¸²à¸¡ layout à¸—à¸µà¹ˆà¹ƒà¸Šà¹‰
            } else {
            tem.style.display = "none";
            }
        });
    });

// ##### description à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¹„à¸›à¸•à¸²à¸¡à¸—à¸µà¹ˆà¹€à¸¥à¸·à¸­à¸ dropdown (template)
    const templateDetails = {
        // * t[à¹€à¸¥à¸‚ templateid] à¸à¸£à¸²à¸šà¸‚à¸­à¸­à¸ à¸±à¸¢à¸¡à¸±à¸™à¸•à¹‰à¸­à¸‡à¹ƒà¸ªà¹ˆà¸¡à¸·à¸­ à¹‚à¸­à¹‰à¸¢
        "s1-1": {
            t1: { text: "à¸­à¸° à¸­à¸´ à¸­à¸¶ à¸­à¸¸ à¹€à¸­à¸° à¹à¸­à¸° à¹€à¸­à¸­à¸° à¹‚à¸­à¸° à¹€à¸­à¸²à¸° à¹€à¸­à¸µà¸¢à¸° à¹€à¸­à¸·à¸­à¸° à¸­à¸±à¸§à¸° ", img: "/static/img/maxresdefault.jpg" },
            t2: { text: "à¸­à¸² à¸­à¸µ à¸­à¸·à¸­ à¸­à¸¹ à¹€à¸­ à¹à¸­ à¹‚à¸­ à¸­à¸­ à¹€à¸­à¸­ à¹€à¸­à¸µà¸¢ à¹€à¸­à¸·à¸­ à¸­à¸±à¸§ à¸¤à¹… à¸¦à¹…", img: "/static/img/maxresdefault.jpg" },
            t3: { text: "à¸­à¸° à¸­à¸² à¸­à¸´ à¸­à¸µ à¸­à¸¶ à¸­à¸·à¸­ à¸­à¸¸ à¸­à¸¹ à¹€à¸­à¸° à¹€à¸­ à¹à¸­à¸° à¹à¸­ à¹‚à¸­à¸° à¹‚à¸­ à¹€à¸­à¸²à¸° à¸­à¸­ à¹€à¸­à¸­à¸° à¹€à¸­à¸­ à¹€à¸­à¸µà¸¢à¸° à¹€à¸­à¸µà¸¢ à¹€à¸­à¸·à¸­à¸° à¹€à¸­à¸·à¸­ à¸­à¸±à¸§à¸° à¸­à¸±à¸§ à¸¤ à¸¤à¹… à¸¦ à¸¦à¹… à¸­à¸³ à¹ƒà¸­ à¹„à¸­ à¹€à¸­à¸²", img: "/static/img/maxresdefault.jpg" }
        },
        "s1-2": {
            t4: { text: "à¸„à¸³à¸à¸´à¸£à¸´à¸¢à¸²: à¸à¸´à¸™ à¸­à¸²à¸š à¸«à¸´à¸§ à¸”à¸¹ à¹€à¸”à¸´à¸™ à¸§à¸´à¹ˆà¸‡ à¸Ÿà¸±à¸‡ à¸£à¹‰à¸­à¸™ à¸™à¸­à¸™ à¸•à¸·à¹ˆà¸™", img: null },
            t5: { text: "à¸„à¸³à¸™à¸²à¸¡: à¸‚à¸² à¸¡à¸·à¸­ à¹‚à¸•à¹Šà¸° à¹€à¸•à¸µà¸¢à¸‡ à¸«à¸™à¸±à¸‡ à¸‚à¸§à¸” à¸ˆà¸²à¸™ à¸Šà¸²à¸¡ à¹„à¸Ÿ à¸šà¹‰à¸²à¸™", img: null },
            t6: { text: "à¸„à¸³ 2 à¸žà¸¢à¸²à¸‡à¸„à¹Œ: à¸”à¸´à¸™à¸ªà¸­ à¸¢à¸²à¸‡à¸¥à¸š à¸à¸£à¸°à¹€à¸›à¹‹à¸² à¸£à¸­à¸‡à¹€à¸—à¹‰à¸² à¸ªà¸¡à¸¸à¸” à¸«à¸¡à¸­à¸™à¸‚à¹‰à¸²à¸‡ à¸•à¸¹à¹‰à¹€à¸¢à¹‡à¸™ à¸ªà¸šà¸¹à¹ˆ à¸‚à¸™à¸¡ à¹„à¸Ÿà¸Ÿà¹‰à¸²", img: null }
        },
        "s1-3": {
            t7: { text: "à¸„à¸³à¸„à¸¥à¹‰à¸²à¸¢: à¸•à¸² à¸›à¸¥à¸² à¸à¸² à¸«à¸¡à¸²", img: null },
            t8: { text: "à¸„à¸³à¸„à¸¥à¹‰à¸²à¸¢: à¹„à¸à¹ˆ à¹„à¸‚à¹ˆ à¹„à¸¡à¹ˆ à¹ƒà¸ˆ", img: null },
            t9: { text: "à¸„à¸³à¸„à¸¥à¹‰à¸²à¸¢: à¸«à¸¡à¸¹ à¸«à¸¹ à¸›à¸¹ à¸‡à¸¹", img: null }
        },
        "s1-4": {
            t10: { text: "à¸›à¹‰à¸²à¹à¸ªà¸‡à¹€à¸›à¹‡à¸™à¸„à¸™à¸—à¸µà¹ˆà¸£à¸±à¸à¸•à¹‰à¸™à¹„à¸¡à¹‰à¸¡à¸²à¸ à¸—à¸¸à¸à¹€à¸Šà¹‰à¸²à¹€à¸˜à¸­à¸ˆà¸°à¸£à¸”à¸™à¹‰à¸³à¸•à¹‰à¸™à¹„à¸¡à¹‰à¸«à¸™à¹‰à¸²à¸šà¹‰à¸²à¸™ à¹„à¸¡à¹ˆà¸§à¹ˆà¸²à¸ˆà¸°à¸à¸™à¸•à¸à¸«à¸£à¸·à¸­à¹à¸”à¸”à¸­à¸­à¸ à¸§à¸±à¸™à¸«à¸™à¸¶à¹ˆà¸‡à¸•à¹‰à¸™à¸¡à¸°à¸¥à¸´à¸‚à¸­à¸‡à¸›à¹‰à¸²à¹à¸ªà¸‡à¸­à¸­à¸à¸”à¸­à¸à¸ªà¸§à¸¢à¸¡à¸²à¸à¸ˆà¸™à¹€à¸žà¸·à¹ˆà¸­à¸™à¸šà¹‰à¸²à¸™à¹€à¸”à¸´à¸™à¸œà¹ˆà¸²à¸™à¸à¹‡à¸•à¹‰à¸­à¸‡à¸Šà¸¡ à¸›à¹‰à¸²à¹à¸ªà¸‡à¸¢à¸´à¹‰à¸¡à¸­à¸¢à¹ˆà¸²à¸‡à¸¡à¸µà¸„à¸§à¸²à¸¡à¸ªà¸¸à¸‚ à¹€à¸˜à¸­à¹€à¸”à¹‡à¸”à¸”à¸­à¸à¸¡à¸°à¸¥à¸´à¹„à¸›à¹ƒà¸ªà¹ˆà¹à¸ˆà¸à¸±à¸™à¹ƒà¸™à¸šà¹‰à¸²à¸™ à¹à¸¥à¸°à¸žà¸¹à¸”à¸à¸±à¸šà¸•à¹‰à¸™à¹„à¸¡à¹‰à¸§à¹ˆà¸² â€œà¸‚à¸­à¸šà¹ƒà¸ˆà¸™à¸° à¸—à¸µà¹ˆà¹€à¸•à¸´à¸šà¹‚à¸•à¹ƒà¸«à¹‰à¸›à¹‰à¸²à¸”à¸¹à¸—à¸¸à¸à¸§à¸±à¸™â€", img: null },
            t11: { text: "à¸§à¸±à¸™à¸™à¸±à¹‰à¸™à¸žà¸¢à¸²à¸à¸£à¸“à¹Œà¸­à¸²à¸à¸²à¸¨à¹à¸ˆà¹‰à¸‡à¸§à¹ˆà¸²à¸à¸™à¸ˆà¸°à¸•à¸ à¸¥à¸¸à¸‡à¹à¸¡à¹‰à¸™à¸à¸³à¸¥à¸±à¸‡à¸ˆà¸°à¹„à¸›à¸•à¸¥à¸²à¸” à¹à¸•à¹ˆà¸¥à¸·à¸¡à¸£à¹ˆà¸¡à¹„à¸§à¹‰à¹ƒà¸™à¸šà¹‰à¸²à¸™ à¸žà¸­à¹€à¸”à¸´à¸™à¹„à¸›à¸–à¸¶à¸‡à¸«à¸™à¹‰à¸²à¸‹à¸­à¸¢ à¸à¸™à¸à¹‡à¸•à¸à¸«à¸™à¸±à¸ à¸¥à¸¸à¸‡à¹à¸¡à¹‰à¸™à¹€à¸¥à¸¢à¸§à¸´à¹ˆà¸‡à¸à¸¥à¸±à¸šà¸¡à¸²à¸«à¸¥à¸šà¹ƒà¸•à¹‰à¸Šà¸²à¸¢à¸„à¸²à¸šà¹‰à¸²à¸™à¹€à¸žà¸£à¸²à¸°à¹„à¸¡à¹ˆà¸¡à¸µà¸£à¹ˆà¸¡ à¹€à¸‚à¸²à¸™à¸±à¹ˆà¸‡à¸£à¸­à¸ˆà¸™à¸à¸™à¸‹à¸² à¹à¸¥à¹‰à¸§à¸ˆà¸¶à¸‡à¹€à¸”à¸´à¸™à¹„à¸›à¸•à¸¥à¸²à¸”à¹ƒà¸«à¸¡à¹ˆ à¸–à¸¶à¸‡à¹à¸¡à¹‰à¸ˆà¸°à¹€à¸›à¸µà¸¢à¸à¸™à¸´à¸”à¸«à¸™à¹ˆà¸­à¸¢ à¹à¸•à¹ˆà¸¥à¸¸à¸‡à¹à¸¡à¹‰à¸™à¸à¹‡à¸¢à¸±à¸‡à¸­à¸²à¸£à¸¡à¸“à¹Œà¸”à¸µ", img: null },
            t12: { text: "à¸žà¸µà¹ˆà¹à¸›à¹‰à¸‡à¸•à¸·à¹ˆà¸™à¹€à¸Šà¹‰à¸²à¸¡à¸²à¸—à¸³à¸à¸±à¸šà¸‚à¹‰à¸²à¸§à¹ƒà¸«à¹‰à¹à¸¡à¹ˆ à¸žà¸µà¹ˆà¹à¸›à¹‰à¸‡à¸„à¸´à¸”à¹„à¸¡à¹ˆà¸­à¸­à¸à¸§à¹ˆà¸²à¸ˆà¸°à¸—à¸³à¸­à¸°à¹„à¸£à¸”à¸µ à¹€à¸¥à¸¢à¹€à¸›à¸´à¸”à¸•à¸¹à¹‰à¹€à¸¢à¹‡à¸™à¹€à¸ˆà¸­à¹„à¸‚à¹ˆ 2 à¸Ÿà¸­à¸‡à¸à¸±à¸šà¸•à¹‰à¸™à¸«à¸­à¸¡à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢ à¸žà¸µà¹ˆà¹à¸›à¹‰à¸‡à¹€à¸¥à¸¢à¸•à¸­à¸à¹„à¸‚à¹ˆ à¹ƒà¸ªà¹ˆà¸•à¹‰à¸™à¸«à¸­à¸¡ à¹à¸¥à¹‰à¸§à¸—à¸­à¸”à¹€à¸›à¹‡à¸™à¹„à¸‚à¹ˆà¹€à¸ˆà¸µà¸¢à¸§à¸«à¸­à¸¡à¸à¸£à¸¸à¹ˆà¸™ à¹à¸¡à¹ˆà¹€à¸”à¸´à¸™à¸­à¸­à¸à¸¡à¸²à¸ˆà¸²à¸à¸«à¹‰à¸­à¸‡à¹à¸¥à¸°à¸žà¸¹à¸”à¸§à¹ˆà¸² â€œà¸«à¸­à¸¡à¸ˆà¸±à¸‡à¹€à¸¥à¸¢à¸¥à¸¹à¸ à¸™à¹ˆà¸²à¸à¸´à¸™à¸¡à¸²à¸â€ à¸žà¸µà¹ˆà¹à¸›à¹‰à¸‡à¸¢à¸´à¹‰à¸¡à¸”à¹‰à¸§à¸¢à¸„à¸§à¸²à¸¡à¸ à¸¹à¸¡à¸´à¹ƒà¸ˆ", img: null }
        },
        "s1-5": {
            t14: { text: "à¸•à¸² à¸«à¸¹ à¸ˆà¸¡à¸¹à¸ à¸›à¸²à¸ à¸¡à¸·à¸­ à¹à¸‚à¸™ à¸‚à¸² à¹€à¸—à¹‰à¸² à¸™à¸´à¹‰à¸§ à¸Ÿà¸±à¸™ à¹€à¸¥à¹‡à¸š à¸‚à¹‰à¸­à¸¨à¸­à¸ à¹€à¸‚à¹ˆà¸² à¸œà¸¡ à¸„à¸´à¹‰à¸§ à¸¥à¸´à¹‰à¸™", img: null },
            t16: { text: "à¸ˆà¸²à¸™ à¸Šà¸²à¸¡ à¸Šà¹‰à¸­à¸™ à¸ªà¹‰à¸­à¸¡ à¸¡à¸µà¸” à¹à¸à¹‰à¸§à¸™à¹‰à¸³ à¸«à¸¡à¹‰à¸­ à¸à¸£à¸°à¸—à¸° à¸•à¸¹à¹‰à¹€à¸¢à¹‡à¸™ à¸–à¸±à¸‡à¸‚à¸¢à¸° à¹à¸›à¸£à¸‡à¸ªà¸µà¸Ÿà¸±à¸™ à¸¢à¸²à¸ªà¸µà¸Ÿà¸±à¸™ à¹à¸Šà¸¡à¸žà¸¹ à¹‚à¸–à¸ªà¹‰à¸§à¸¡ à¸à¸±à¸à¸šà¸±à¸§ à¹€à¸à¹‰à¸²à¸­à¸µà¹‰ à¹‚à¸•à¹Šà¸°", img: null },
            t17: { text: "à¸•à¸·à¹ˆà¸™ à¹à¸›à¸£à¸‡à¸Ÿà¸±à¸™ à¸¥à¹‰à¸²à¸‡à¸«à¸™à¹‰à¸² à¸­à¸²à¸šà¸™à¹‰à¸³ à¹à¸•à¹ˆà¸‡à¸•à¸±à¸§ à¸«à¸§à¸µà¸œà¸¡ à¸à¸´à¸™à¸‚à¹‰à¸²à¸§ à¹ƒà¸ªà¹ˆà¸£à¸­à¸‡à¹€à¸—à¹‰à¸² à¸‹à¸±à¸à¸œà¹‰à¸² à¸¥à¹‰à¸²à¸‡à¸ˆà¸²à¸™ à¹€à¸”à¸´à¸™ à¸§à¸´à¹ˆà¸‡ à¸¢à¸·à¸™ à¸™à¸±à¹ˆà¸‡ à¸™à¸­à¸™ à¹€à¸¥à¹ˆà¸™à¹‚à¸—à¸£à¸¨à¸±à¸žà¸—à¹Œ", img: null }
        },
        "s1-6": {
            t19: { text: "à¸›à¸£à¸°à¹‚à¸¢à¸„à¹ƒà¸™à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™ à¹€à¸Šà¹ˆà¸™ à¸à¸´à¸™à¸‚à¹‰à¸²à¸§à¹à¸¥à¹‰à¸§ à¹„à¸›à¸­à¸²à¸šà¸™à¹‰à¸³ à¸¥à¹‰à¸²à¸‡à¸¡à¸·à¸­à¸à¹ˆà¸­à¸™ à¸•à¸·à¹ˆà¸™à¹„à¸”à¹‰à¹à¸¥à¹‰à¸§ à¹à¸¥à¸°à¸­à¸·à¹ˆà¸™ à¹†", img: null },
            t20: { text: "à¸›à¸£à¸°à¹‚à¸¢à¸„à¹ƒà¸™à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™à¸—à¸µà¹ˆà¸¢à¸²à¸§à¸‚à¸¶à¹‰à¸™ à¹€à¸Šà¹ˆà¸™ à¹„à¸›à¸—à¸²à¸™à¸‚à¹‰à¸²à¸§à¸à¸±à¸™à¹„à¸«à¸¡ à¸§à¸±à¸™à¸™à¸µà¹‰à¹€à¸›à¹‡à¸™à¸¢à¸±à¸‡à¹„à¸‡à¸šà¹‰à¸²à¸‡ à¸­à¸²à¸à¸²à¸¨à¸”à¸µà¸ˆà¸±à¸‡à¹€à¸¥à¸¢ à¸à¸¥à¸±à¸šà¸šà¹‰à¸²à¸™à¸”à¸µ à¹† à¸™à¸° à¹à¸¥à¸°à¸­à¸·à¹ˆà¸™ à¹†", img: null },
            t21: { text: "à¸›à¸£à¸°à¹‚à¸¢à¸„à¸„à¸¥à¹‰à¸­à¸‡à¸ˆà¸­à¸‡ à¹€à¸Šà¹ˆà¸™ à¸ªà¸²à¸§à¹à¸ªà¸™à¸ªà¸§à¸¢à¹ƒà¸ªà¹ˆà¸ªà¸£à¹‰à¸­à¸¢à¸ªà¸²à¸¡à¸ªà¸´à¸šà¸ªà¸­à¸‡à¹€à¸ªà¹‰à¸™ à¹à¸¥à¸°à¸­à¸·à¹ˆà¸™ à¹†", img: null }
        },
        "s1-7": {
            t1: { text: "-", img: null },
            t2: { text: "-", img: null },
            t3: { text: "-", img: null }
        },
        "s1-8": {
            t22: { text: "à¸›à¸£à¸°à¹‚à¸¢à¸„à¹ƒà¸™à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™ à¹€à¸Šà¹ˆà¸™ à¹„à¸›à¸—à¸²à¸™à¸‚à¹‰à¸²à¸§à¸à¸±à¸™à¹„à¸«à¸¡ à¸§à¸±à¸™à¸™à¸µà¹‰à¹€à¸›à¹‡à¸™à¸¢à¸±à¸‡à¹„à¸‡à¸šà¹‰à¸²à¸‡", img: null },
            t23: { text: "à¸›à¸£à¸°à¹‚à¸¢à¸„à¹ƒà¸™à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™à¸—à¸µà¹ˆà¸¢à¸²à¸§à¸‚à¸¶à¹‰à¸™ à¹€à¸Šà¹ˆà¸™ à¹€à¸¡à¸·à¹ˆà¸­à¹€à¸Šà¹‰à¸²à¸™à¸µà¹‰à¸‰à¸±à¸™à¸•à¸·à¹ˆà¸™à¸ªà¸²à¸¢ à¸‰à¸±à¸™à¸à¸³à¸¥à¸±à¸‡à¸ˆà¸±à¸”à¸«à¹‰à¸­à¸‡à¸—à¸³à¸‡à¸²à¸™à¹ƒà¸«à¸¡à¹ˆ", img: null },
            t24: { text: "à¸›à¸£à¸°à¹‚à¸¢à¸„à¹ƒà¸™à¸Šà¸µà¸§à¸´à¸•à¸›à¸£à¸°à¸ˆà¸³à¸§à¸±à¸™à¸—à¸µà¹ˆà¸¢à¸²à¸§à¸‚à¸¶à¹‰à¸™à¸­à¸µà¸ à¹€à¸Šà¹ˆà¸™ à¸‰à¸±à¸™à¸§à¸²à¸‡à¹à¸œà¸™à¸§à¹ˆà¸²à¸ˆà¸°à¹€à¸£à¸´à¹ˆà¸¡à¹€à¸£à¸µà¸¢à¸™à¸ à¸²à¸©à¸²à¸—à¸µà¹ˆà¸ªà¸²à¸¡à¹ƒà¸™à¸›à¸µà¸«à¸™à¹‰à¸²", img: null }
        },
        "s1-9": {
            t1: { text: "-", img: null },
            t2: { text: "-", img: null },
            t3: { text: "-", img: null }
        },
    };

    function updateTemplateInfo(select) {
        const selectId = select.id;
        const selectedValue = select.value;
        console.log(`Updating info for select ID: ${selectId}, selected value: ${selectedValue}`);
        const content = templateDetails[selectId]?.[selectedValue];
        console.log('Content from templateDetails:', content);

        const eachTem = select.closest(".each-tem");
        const rightTem = eachTem.querySelector(".right-tem");
        const textBox = rightTem.querySelector("p");
        const imageBox = rightTem.querySelector("img");



        if (content) {
            if (textBox) {
                textBox.textContent = content.text || "";
            }
            if (imageBox) {
                if (content.img) {
                    imageBox.src = content.img;
                    imageBox.style.display = "block";
                } else {
                    imageBox.style.display = "none";
                }
            }
        }
    }

    // âœ… à¹€à¸žà¸´à¹ˆà¸¡ event listener à¹à¸¥à¸°à¹à¸ªà¸”à¸‡à¸œà¸¥à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸—à¸±à¸™à¸—à¸µà¹€à¸¡à¸·à¹ˆà¸­à¹‚à¸«à¸¥à¸”à¸«à¸™à¹‰à¸²
    document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll("select[id^='s1-']").forEach(select => {
            select.addEventListener("change", () => updateTemplateInfo(select));
            updateTemplateInfo(select); // ðŸ‘ˆ à¹à¸ªà¸”à¸‡à¸œà¸¥à¸—à¸±à¸™à¸—à¸µà¸•à¸²à¸¡à¸„à¹ˆà¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™
        });
    });

    // ##### Function to save selected template values
    function saveSelectedTemplates() {
        console.log("===== assign_p2.js - saveSelectedTemplates() is working =====");
        const selectedTemplates = [];
        document.querySelectorAll(".each-tem").forEach(eachTem => {
            // Check if the parent container (.each-tem) is visible
            if (eachTem.style.display !== "none") {
                const select = eachTem.querySelector("select[id^='s1-']");
                if (select) {
                    const activityIdMatch = select.id.match(/s1-(\d+)/);
                    const templateIdMatch = select.value.match(/t(\d+)/);

                    if (activityIdMatch && templateIdMatch) {
                        selectedTemplates.push({
                            activityid: parseInt(activityIdMatch[1], 10),
                            templateid: parseInt(templateIdMatch[1], 10)
                        });
                    }
                }
            }
        });
        console.log("Selected Templates:", selectedTemplates);
        return selectedTemplates;
        // Here you can send `selectedTemplates` to the backend or store it as needed
        // Example: fetch('/save_templates', { method: 'POST', body: JSON.stringify(selectedTemplates) });
    }

    // ##### Event listener for the "Done" button
    document.getElementById("but-done").addEventListener("click", saveSelectedTemplates);

